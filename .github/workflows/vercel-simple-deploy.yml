name: Vercel éƒ¨ç½² (ç®€åŒ–ç‰ˆ)

on:
  # æ‰‹åŠ¨è§¦å‘éƒ¨ç½²
  workflow_dispatch:
    inputs:
      message:
        description: 'éƒ¨ç½²ä¿¡æ¯ (å¯é€‰)'
        required: false
        default: 'ä»ŽGitHub Actionsè§¦å‘éƒ¨ç½²'

  # é€šè¿‡ç‰¹å®šcommit messageè§¦å‘
  push:
    branches:
      - main

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: æ£€å‡ºä»£ç 
        uses: actions/checkout@v4

      - name: æ˜¾ç¤ºéƒ¨ç½²è¯´æ˜Ž
        run: |
          echo "ðŸš€ Verceléƒ¨ç½²è¯´æ˜Ž"
          echo "================================"
          echo "æ­¤å·¥ä½œæµå·²é…ç½®ä¸ºéœ€è¦æ‰‹åŠ¨æ“ä½œæ¥è§¦å‘Verceléƒ¨ç½²"
          echo ""
          echo "æ–¹æ³•ä¸€ï¼šVercel Dashboardå¯¼å…¥ï¼ˆæŽ¨èï¼‰"
          echo "1. è®¿é—® https://vercel.com/dashboard"
          echo "2. ç‚¹å‡» 'Add New...' â†’ 'Project'"
          echo "3. å¯¼å…¥æ­¤GitHubä»“åº“ï¼šupgraded-octo-fortnight"
          echo "4. é…ç½®ï¼šFramework Preset = Other"
          echo "5. æ·»åŠ çŽ¯å¢ƒå˜é‡ï¼šNEWSAPI_KEY"
          echo "6. ç‚¹å‡» Deploy"
          echo ""
          echo "æ–¹æ³•äºŒï¼šä½¿ç”¨GitHub Secretsè‡ªåŠ¨éƒ¨ç½²"
          echo "å¦‚éœ€è‡ªåŠ¨éƒ¨ç½²ï¼Œè¯·åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ ä»¥ä¸‹Secretsï¼š"
          echo "- VERCEL_TOKEN (ä»ŽVercelèŽ·å–)"
          echo "- VERCEL_ORG_ID (ä»ŽVercelé¡¹ç›®è®¾ç½®èŽ·å–)"
          echo "- VERCEL_PROJECT_ID (ä»ŽVercelé¡¹ç›®è®¾ç½®èŽ·å–)"
          echo ""
          echo "æ–¹æ³•ä¸‰ï¼šæœ¬åœ°éƒ¨ç½²"
          echo "è¿è¡Œå‘½ä»¤ï¼š"
          echo "1. npm install -g vercel"
          echo "2. vercel login"
          echo "3. vercel --prod"
          echo "================================"

      - name: åˆ›å»ºéƒ¨ç½²README
        run: |
          cat > VERCEL_DEPLOY_INSTRUCTIONS.md << 'EOF'
          # ðŸš€ Verceléƒ¨ç½²æŒ‡å—
          
          ## æŽ¨èæ–¹æ³•ï¼šDashboardå¯¼å…¥ï¼ˆ3åˆ†é’Ÿå®Œæˆï¼‰
          
          ### 1. è®¿é—®Vercel Dashboard
          æ‰“å¼€ https://vercel.com/dashboard å¹¶ç™»å½•
          
          ### 2. å¯¼å…¥é¡¹ç›®
          - ç‚¹å‡» "Add New..." â†’ "Project"
          - é€‰æ‹© "Import Git Repository"
          - æ‰¾åˆ° `upgraded-octo-fortnight` ä»“åº“
          - ç‚¹å‡» "Import"
          
          ### 3. é¡¹ç›®é…ç½®
          | è®¾ç½®é¡¹ | å€¼ |
          |--------|-----|
          | Framework Preset | Other |
          | Root Directory | ./ (é»˜è®¤) |
          | Build Command | ç•™ç©º |
          | Output Directory | ç•™ç©º |
          | Install Command | pip install -r requirements.txt |
          
          ### 4. çŽ¯å¢ƒå˜é‡
          æ·»åŠ çŽ¯å¢ƒå˜é‡ï¼š
          - **Name**: `NEWSAPI_KEY`
          - **Value**: ä½ çš„NewsAPIå¯†é’¥
          
          ### 5. éƒ¨ç½²
          ç‚¹å‡» "Deploy" æŒ‰é’®ï¼Œç­‰å¾…1-2åˆ†é’Ÿå®Œæˆéƒ¨ç½²
          
          ## æµ‹è¯•APIç«¯ç‚¹
          éƒ¨ç½²æˆåŠŸåŽå¯è®¿é—®ï¼š
          - å¥åº·æ£€æŸ¥ï¼š`https://your-project.vercel.app/api/health`
          - èŽ·å–æ–°é—»ï¼š`https://your-project.vercel.app/api/news?query=AI&language=zh`
          - çƒ­é—¨æ–°é—»ï¼š`https://your-project.vercel.app/api/trending`
          - æ–°é—»æºï¼š`https://your-project.vercel.app/api/sources`
          EOF
          
          echo "ðŸ“„ å·²ç”Ÿæˆè¯¦ç»†çš„éƒ¨ç½²è¯´æ˜Žæ–‡æ¡£ï¼šVERCEL_DEPLOY_INSTRUCTIONS.md"
